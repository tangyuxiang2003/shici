# 诗词AI助手功能说明

## 功能概述
在诗词赏析平台首页添加了一个悬浮的AI聊天助手，用户可以随时与AI助手进行对话，获取诗词相关的帮助和解答。

## 功能特性

### 🎯 核心功能
- **悬浮按钮**：页面右下角固定位置，随时可点击打开
- **智能对话**：基于诗词数据库的智能问答
- **快速提问**：预设常用问题，一键提问
- **响应式设计**：适配移动端和桌面端

### 💬 对话能力
- 诗词推荐和搜索
- 诗人背景介绍
- 诗词赏析解读
- 历史文化背景说明
- 朝代历史介绍

### 🎨 界面特色
- 现代化聊天界面设计
- 消息气泡样式
- 加载动画效果
- 最小化/关闭功能

## 技术实现

### 前端组件
- **组件位置**：`src/components/ChatAssistant.vue`
- **API服务**：`src/api/aiAssistant.js`
- **集成方式**：全局组件，在App.vue中引入

### 技术栈
- Vue 3 + Composition API
- Element Plus UI组件库
- 响应式CSS设计
- 模拟AI回复（可扩展为真实AI服务）

### 数据流
```
用户输入 → 前端组件 → AI服务 → 数据处理 → 回复生成 → 界面展示
```

## 使用说明

### 基本操作
1. **打开聊天**：点击右下角"AI助手"按钮
2. **输入问题**：在输入框中输入您的问题
3. **发送消息**：点击发送按钮或按Enter键
4. **快速提问**：使用预设的快速提问按钮
5. **最小化**：点击标题栏的减号按钮
6. **关闭**：点击标题栏的关闭按钮

### 示例问题
- "推荐一些经典唐诗"
- "介绍一下李白"
- "有哪些描写月亮的诗词？"
- "唐诗和宋词有什么区别？"

## 扩展配置

### n8n工作流集成
项目已实现与n8n工作流平台的完整集成，用户对话将通过webhook发送到n8n工作流进行处理：

1. **工作流配置**：参考 `n8n-workflow-setup.md`
2. **Webhook端点**：`http://localhost:8765/webhook/chat-handler`
3. **数据格式**：标准JSON请求/响应
4. **备用方案**：如果n8n服务不可用，将使用本地智能回复

### 自定义回复
修改 `src/api/aiAssistant.js` 中的回复逻辑：

```javascript
// 添加新的回复规则
if (message.includes('你的关键词')) {
  return '你的自定义回复内容'
}
```

## 开发指南

### 添加新的快速提问
在 `ChatAssistant.vue` 中修改 `quickActions` 数组：

```javascript
const quickActions = ref([
  {
    label: '你的标签',
    text: '你的问题内容',
    icon: YourIconComponent
  }
  // ... 其他项目
])
```

### 样式自定义
修改组件样式部分的自定义CSS变量：

```css
.chat-assistant-button {
  background: your-color; /* 修改按钮颜色 */
}

.chat-header {
  background: your-gradient; /* 修改标题栏渐变 */
}
```

## 部署说明

### 环境要求
- Node.js 16+
- Vue 3
- Element Plus
- n8n (可选，用于AI处理)

### 快速启动
```bash
# 使用启动脚本（推荐）
node start-dev.js

# 或手动启动
npm install
npm run dev
```

### n8n服务启动
```bash
# 在另一个终端启动n8n
npx n8n
```

### 生产构建
```bash
npm run build
```

### 测试n8n连接
```bash
node test-n8n-webhook.js
```

## 故障排除

### 常见问题
1. **组件不显示**：检查App.vue中的组件引入
2. **消息发送失败**：检查控制台错误信息
3. **样式异常**：检查CSS加载顺序
4. **n8n连接失败**：确保n8n服务正在运行

### n8n相关问题
- **Webhook连接失败**：检查n8n服务是否运行在localhost:8765
- **响应超时**：检查n8n工作流配置是否正确
- **格式错误**：验证请求/响应JSON格式

### 调试方法
1. 打开浏览器开发者工具
2. 查看Console面板的错误信息
3. 检查Network面板的请求状态
4. 使用测试脚本验证n8n连接
5. 查看n8n工作流执行日志

## 版本历史

### v1.0.0 (2024-01-01)
- 初始版本发布
- 基础聊天功能
- 预设问答内容
- 响应式界面设计

## 贡献指南
欢迎提交Issue和Pull Request来改进这个功能。

---

*如有问题，请查看文档或联系开发团队。*